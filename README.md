<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# txctx

```go
import "github.com/gokutils/txctx"
```

TxCtx permet de gerer les transaction au travers des context

ceci peremt de gerer par scope sur plusieur base de donn√©e les transactions

## Index

- [func Add\(ctx context.Context, txs ...Tx\)](<#Add>)
- [func Begin\(ctx context.Context\) context.Context](<#Begin>)
- [func Commit\(ctx context.Context\) error](<#Commit>)
- [func CreateLongTranscation\(ctx context.Context, key interface\{\}\) context.Context](<#CreateLongTranscation>)
- [func DeleteLongTransaction\(key interface\{\}\)](<#DeleteLongTransaction>)
- [func GetLongTransaction\(key interface\{\}\) \(context.Context, error\)](<#GetLongTransaction>)
- [func GetValue\(ctx context.Context, key interface\{\}\) \(interface\{\}, bool\)](<#GetValue>)
- [func GetValueOrStore\(ctx context.Context, key interface\{\}, value interface\{\}\) \(interface\{\}, bool\)](<#GetValueOrStore>)
- [func IsTxContext\(ctx context.Context\) bool](<#IsTxContext>)
- [func OnCommit\(ctx context.Context, callback func\(ctx context.Context\) error\)](<#OnCommit>)
- [func OnRollback\(ctx context.Context, callback func\(ctx context.Context\) error\)](<#OnRollback>)
- [func Rollback\(ctx context.Context\) error](<#Rollback>)
- [func SetValue\(ctx context.Context, key interface\{\}, value interface\{\}\)](<#SetValue>)
- [type ContextTransactionKey](<#ContextTransactionKey>)
- [type ResolveCallback](<#ResolveCallback>)
  - [func \(r \*ResolveCallback\) Commit\(ctx context.Context\) error](<#ResolveCallback.Commit>)
  - [func \(r \*ResolveCallback\) Rollback\(ctx context.Context\) error](<#ResolveCallback.Rollback>)
- [type Tx](<#Tx>)
- [type TxStore](<#TxStore>)
  - [func NewTxStore\(ctx context.Context\) \*TxStore](<#NewTxStore>)
  - [func \(impl \*TxStore\) Add\(txs ...Tx\)](<#TxStore.Add>)
  - [func \(impl \*TxStore\) Commit\(ctx context.Context\) error](<#TxStore.Commit>)
  - [func \(impl \*TxStore\) GetValue\(key interface\{\}\) \(interface\{\}, bool\)](<#TxStore.GetValue>)
  - [func \(impl \*TxStore\) GetValueOrStore\(key interface\{\}, value interface\{\}\) \(interface\{\}, bool\)](<#TxStore.GetValueOrStore>)
  - [func \(impl \*TxStore\) Rollback\(ctx context.Context\) error](<#TxStore.Rollback>)
  - [func \(impl \*TxStore\) SetValue\(key interface\{\}, value interface\{\}\)](<#TxStore.SetValue>)
- [type Txs](<#Txs>)


<a name="Add"></a>
## func Add

```go
func Add(ctx context.Context, txs ...Tx)
```

Add add tx in context

<a name="Begin"></a>
## func Begin

```go
func Begin(ctx context.Context) context.Context
```

Start new context

<a name="Commit"></a>
## func Commit

```go
func Commit(ctx context.Context) error
```

Commit transaction in context

Executed if is a first context

<a name="CreateLongTranscation"></a>
## func CreateLongTranscation

```go
func CreateLongTranscation(ctx context.Context, key interface{}) context.Context
```

CreateLongTranscation create and store reference of transcation with given context

<a name="DeleteLongTransaction"></a>
## func DeleteLongTransaction

```go
func DeleteLongTransaction(key interface{})
```

GetLongTransaction retrieve long transction by key

<a name="GetLongTransaction"></a>
## func GetLongTransaction

```go
func GetLongTransaction(key interface{}) (context.Context, error)
```

GetLongTransaction retrieve long transction by key

<a name="GetValue"></a>
## func GetValue

```go
func GetValue(ctx context.Context, key interface{}) (interface{}, bool)
```

GetValue retrieve Key, value

<a name="GetValueOrStore"></a>
## func GetValueOrStore

```go
func GetValueOrStore(ctx context.Context, key interface{}, value interface{}) (interface{}, bool)
```

GetValueOrStore retrieve Key, value or store in tx store

<a name="IsTxContext"></a>
## func IsTxContext

```go
func IsTxContext(ctx context.Context) bool
```

IsTxContext check if context containe key for tx store

<a name="OnCommit"></a>
## func OnCommit

```go
func OnCommit(ctx context.Context, callback func(ctx context.Context) error)
```



<a name="OnRollback"></a>
## func OnRollback

```go
func OnRollback(ctx context.Context, callback func(ctx context.Context) error)
```



<a name="Rollback"></a>
## func Rollback

```go
func Rollback(ctx context.Context) error
```

Rollback transaction in context

Executed if is a first context

<a name="SetValue"></a>
## func SetValue

```go
func SetValue(ctx context.Context, key interface{}, value interface{})
```

SetValue store Key, value in tx store

<a name="ContextTransactionKey"></a>
## type ContextTransactionKey



```go
type ContextTransactionKey string
```

<a name="TransactionKeyStore"></a>

```go
const (
    TransactionKeyStore ContextTransactionKey = "txctx-transaction-store"
)
```

<a name="ResolveCallback"></a>
## type ResolveCallback



```go
type ResolveCallback struct {
    // contains filtered or unexported fields
}
```

<a name="ResolveCallback.Commit"></a>
### func \(\*ResolveCallback\) Commit

```go
func (r *ResolveCallback) Commit(ctx context.Context) error
```



<a name="ResolveCallback.Rollback"></a>
### func \(\*ResolveCallback\) Rollback

```go
func (r *ResolveCallback) Rollback(ctx context.Context) error
```



<a name="Tx"></a>
## type Tx



```go
type Tx interface {
    Commit(_ context.Context) error
    Rollback(_ context.Context) error
}
```

<a name="TxStore"></a>
## type TxStore



```go
type TxStore struct {
    // contains filtered or unexported fields
}
```

<a name="NewTxStore"></a>
### func NewTxStore

```go
func NewTxStore(ctx context.Context) *TxStore
```



<a name="TxStore.Add"></a>
### func \(\*TxStore\) Add

```go
func (impl *TxStore) Add(txs ...Tx)
```



<a name="TxStore.Commit"></a>
### func \(\*TxStore\) Commit

```go
func (impl *TxStore) Commit(ctx context.Context) error
```



<a name="TxStore.GetValue"></a>
### func \(\*TxStore\) GetValue

```go
func (impl *TxStore) GetValue(key interface{}) (interface{}, bool)
```



<a name="TxStore.GetValueOrStore"></a>
### func \(\*TxStore\) GetValueOrStore

```go
func (impl *TxStore) GetValueOrStore(key interface{}, value interface{}) (interface{}, bool)
```



<a name="TxStore.Rollback"></a>
### func \(\*TxStore\) Rollback

```go
func (impl *TxStore) Rollback(ctx context.Context) error
```



<a name="TxStore.SetValue"></a>
### func \(\*TxStore\) SetValue

```go
func (impl *TxStore) SetValue(key interface{}, value interface{})
```



<a name="Txs"></a>
## type Txs



```go
type Txs interface {
    Tx
    Add(txs ...Tx)
    GetValue(key interface{}) (interface{}, bool)
    GetValueOrStore(key interface{}, value interface{}) (interface{}, bool)
    SetValue(key interface{}, value interface{})
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
